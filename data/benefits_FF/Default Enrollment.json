[
    {
        "BASE_FORMULA_NAME": "XX_DEFAULT_ENROLLMENT",
        "FORMULA_TEXT": "INPUTS are NUM_ELIG_DPNT\nDEFAULT FOR BEN_OPT_NAME is 'aa'\nDEFAULT FOR BEN_PLN_NAME is 'aa'\nDEFAULT FOR NUM_ELIG_DPNT is 0\nl_pln_name = BEN_PLN_NAME\nl_opt_name = BEN_OPT_NAME\nl_num_elig_dpnt = NUM_ELIG_DPNT\nIF l_pln_name = 'Stay Healthy HMO' then\n(\nif l_opt_name = 'Employee Only' and l_num_elig_dpnt = 0 then\n(\nAUTO_DFLT_VAL = 'Y'\nCARRY_FORWARD_ELIG_DPNT = 'CFWP'\n)\nelse if l_opt_name = 'Employee Plus One' and l_num_elig_dpnt = 1 then\n(\nAUTO_DFLT_VAL = 'Y'\nCARRY_FORWARD_ELIG_DPNT = 'CFWP'\n)\nelse if l_opt_name = 'Employee Plus Family' and\nl_num_elig_dpnt > 1 then\n(\nAUTO_DFLT_VAL = 'Y'\nCARRY_FORWARD_ELIG_DPNT = 'CFWP'\n)\nelse\n(AUTO_DFLT_VAL = 'N')\n)\nelse\n(AUTO_DFLT_VAL = 'N')\nreturn AUTO_DFLT_VAL, CARRY_FORWARD_ELIG_DPNT",
        "LEGISLATIVE_DATA_GROUP": "XX",
        "Description": "This formula is used to automatically default health plan enrollment based on the selected Stay Healthy HMO plan and the number of eligible dependents.",
        "FORMULA_TYPE_NAME": "Default Enrollment"
    },
    {
        "BASE_FORMULA_NAME": "XX_DEFAULT_ENROLLMENT",
        "FORMULA_TEXT": "DEFAULT FOR BEN_OPT_NAME is 'NA'\nDEFAULT FOR BEN_PLN_NAME is 'NA'\nDEFAULT FOR PER_ASG_LABOUR_UNION_MEMBER_FLAG is 'XXX'\nDEFAULT_DATA_VALUE for BEN_EPE_PL_NAME_TN is 'NA'\nDEFAULT_DATA_VALUE for BEN_EPE_OPT_NAME_TN is 'NA'\nDEFAULT FOR PER_ASG_ORG_LEGAL_EMPLOYER_NAME is 'XXX'\nl_pln_name = BEN_PLN_NAME\nl_opt_name = BEN_OPT_NAME\nl_flag = PER_ASG_LABOUR_UNION_MEMBER_FLAG\nAUTO_DFLT_VAL = 'N'\nl_le_name = 'Vision Corporation'\nl_asg_leg_name = PER_ASG_ORG_LEGAL_EMPLOYER_NAME\nl_member_plan = 'Healthy HMO'\nl_non_plan = 'Healthy HMO (NM)'\nl_default_plan = 'NA'\nl_default_option = 'Employee Only'\nl_epe_created = 'N'\ni=1\nWHILE BEN_EPE_PL_NAME_TN.exists(i) LOOP\n(\nIF ( l_asg_leg_name = l_le_name\nAND l_flag = 'Y'\nAND BEN_EPE_PL_NAME_TN[i] = l_member_plan\nAND BEN_EPE_OPT_NAME_TN[i] = l_default_option) THEN\n(\nl_epe_created = 'Y'\nl_default_plan = l_member_plan\nEXIT\n)\nELSE IF ( l_asg_leg_name <> l_le_name\nAND l_flag = 'N'\nAND BEN_EPE_PL_NAME_TN[i] = l_non_plan\nAND BEN_EPE_OPT_NAME_TN[i] = l_default_option) THEN\n(\nl_epe_created = 'Y'\nl_default_plan = l_non_plan\nEXIT\n)\ni = i+1\n)\nIF ( l_epe_created = 'Y' AND l_pln_name = l_default_plan AND l_opt_name = l_default_option) THEN\n(\nAUTO_DFLT_VAL = 'Y'\nCARRY_FORWARD_ELIG_DPNT = 'CFWP'\n)\nreturn AUTO_DFLT_VAL, CARRY_FORWARD_ELIG_DPNT",
        "LEGISLATIVE_DATA_GROUP": "XX",
        "Description": "This formula is used to automatically default health plan enrollment based on the employee's legal employer and union membership status.",
        "FORMULA_TYPE_NAME": "Default Enrollment"
    },
    {
        "BASE_FORMULA_NAME": "XX_DEFAULT_ENROLLMENT",
        "FORMULA_TEXT": "INPUTS ARE NUM_ELIG_DPNT\nDEFAULT FOR BEN_OPT_NAME IS 'x'\nDEFAULT FOR BEN_PLN_NAME IS 'x'\n/* Initialization section */\nAUTO_DFLT_VAL = 'N'\nCARRY_FORWARD_ELIG_DPNT = 'CWFP'\nPREV_PRTT_ENRT_RSLT_ID='0'\nl_actual_eff_date='1951/01/01 00:00:00' (date)\nl_new_effective_date='1951/01/01 00:00:00' (date)\nl_ee_opt_past='N'\nl_sp_opt_past='N'\nl_waive_opt_past='N'\nl_fam_opt_past='N'\nl_plan_name=BEN_PLN_NAME\nl_opt_name=BEN_OPT_NAME\nl_num_elig_dpnt=NUM_ELIG_DPNT\nl_dflt_val='N'\nl_cfwp='NA'\nl_status=123\nl_prev_prtt_enrt_rslt_id='123'\nl_log='X'\nl_log=ess_log_write('Entering R_DFLT_ENRT_DEV_RL')\nl_actual_eff_date=GET_CONTEXT(EFFECTIVE_DATE,to_date('1951/01/01 00:00:00'))\nl_new_effective_date=ADD_DAYS(l_actual_eff_date,-1)\nCHANGE_CONTEXTS(EFFECTIVE_DATE=l_new_effective_date)\n(\nl_prev_prtt_enrt_rslt_id=ben_fn_get_char_value('BEN_PRTT_ENRT_RSLT','PRTT_ENRT_RSLT_ID',l_plan_name, 'NA')\nl_ee_opt_past=ben_fn_get_char_value('BEN_PRTT_ENRT_RSLT','ENROLLED',l_plan_name, 'KA_MED_HDHP_EMP')\nl_sp_opt_past=ben_fn_get_char_value('BEN_PRTT_ENRT_RSLT','ENROLLED',l_plan_name, 'KA_MED_HDHP_SP')\nl_fam_opt_past=ben_fn_get_char_value('BEN_PRTT_ENRT_RSLT','ENROLLED',l_plan_name, 'KA_MED_HDHP_FAM')\nl_waive_opt_past=ben_fn_get_char_value('BEN_PRTT_ENRT_RSLT','ENROLLED',l_plan_name, 'KA_MED_HCHP_WAIVE')\n)/* end change contexts */\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL l_plan_name='||l_plan_name)\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL l_opt_name='||l_opt_name)\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL l_num_elig_dpnt='||to_char(l_num_elig_dpnt))\nl_log=ess_log_write(' l_plan_name='||l_plan_name)\nl_log=ess_log_write(' l_opt_name='||l_opt_name)\nl_log=ess_log_write(' l_num_elig_dpnt='||to_char(l_num_elig_dpnt))\n/* process further only if there is an enrollment in the plan in the previous life event */\nif ( l_ee_opt_past = 'Y'\nOR l_sp_opt_past = 'Y'\nOR l_fam_opt_past = 'Y'\nOR l_waive_opt_past = 'Y' ) then\n(\nif ( l_opt_name = 'KA_MED_HDHP_FAM') then\n(\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL KA_MED_HDHP_FAM')\nl_log=ess_log_write(' KA_MED_HDHP_FAM ')\n/* family will be the default option if\n1) the employee is enrolled in the family option in the previous life event and the num_elig_dpnt is greater than 2\n*/\nif ( l_fam_opt_past='Y' and l_num_elig_dpnt>=2 ) then\n(\nl_dflt_val = 'Y'\nl_cfwp = 'CFWP'\n)\n)\nelse if (l_opt_name = 'KA_MED_HDHP_SP') then\n(\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL KA_MED_HDHP_SP')\nl_log=ess_log_write(' KA_MED_HDHP_SP ')\n/* spouse will become the default option if\n1) the employee is enrolled in spouse in the previous life event\n2) the employee is enrolled into family in the previous life event but has only one num_elig_dpnt indicating a\ndepedent has aged out\n*/\nif ( (l_sp_opt_past = 'Y' and l_num_elig_dpnt=1)\nOR ( l_fam_opt_past='Y' and l_num_elig_dpnt=1) ) then\n(\nl_dflt_val = 'Y'\nl_cfwp = 'CFWP'\n)\n)\nelse if (l_opt_name = 'KA_MED_HDHP_EMP') then\n(\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL KA_MED_HDHP_EMP')\nl_log=ess_log_write(' KA_MED_HDHP_EMP ')\n/* employee will become the default option if\n1) the employee is enrolled in employee-option in the previous life event\n2) the employee is enrolled in the spouse option in the previous life event and there is divorce event */\nif (l_ee_opt_past='Y') then\n(\nl_dflt_val = 'Y'\nl_cfwp = 'CFWP'\n)\nelse if (l_sp_opt_past = 'Y' and l_num_elig_dpnt=0) then\n(\n/* the spouse looses eligbility for some reason then emp will be the default*/\nl_dflt_val = 'Y'\nl_cfwp = 'CFWP'\n)\n)\nelse if (l_opt_name = 'KA_MED_HCHP_WAIVE') then\n(\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL KA_MED_HCHP_WAIVE')\nl_log=ess_log_write(' KA_MED_HCHP_WAIVE ')\n/* waive will become the default option if\n1) the employee is enrolled in the waive option in the previous life event */\nif ( l_waive_opt_past = 'Y') then\n(\nl_dflt_val = 'Y'\nl_cfwp = 'CFWP'\n)\n)\n) /* end if lee or l_sp or l_fam or l_waive*/\nPREV_PRTT_ENRT_RSLT_ID=l_prev_prtt_enrt_rslt_id\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL AUTO_DFLT_VAL='||l_dflt_val)\nl_status = add_rlog (-1 , -1 , 'R_DFLT_ENRT_DEV_RL CARRY_FORWARD_ELIG_DPNT='||l_cfwp)\nl_log=ess_log_write(' AUTO_DFLT_VAL '||l_dflt_val)\nl_log=ess_log_write(' CARRY_FORWARD_ELIG_DPNT '||l_cfwp)\nl_log=ess_log_write(' PREV_PRTT_ENRT_RSLT_ID '||l_prev_prtt_enrt_rslt_id)\nl_log=ess_log_write('Leaving R_DFLT_ENRT_DEV_RL ')\nAUTO_DFLT_VAL=l_dflt_val\nCARRY_FORWARD_ELIG_DPNT=l_cfwp\nreturn AUTO_DFLT_VAL, CARRY_FORWARD_ELIG_DPNT, PREV_PRTT_ENRT_RSLT_ID",
        "LEGISLATIVE_DATA_GROUP": "XX",
        "Description": "This formula automatically defaults health plan enrollment options based on previous enrollment choices and the number of eligible dependents.",
        "FORMULA_TYPE_NAME": "Default Enrollment"
    }
]