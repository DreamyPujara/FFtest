[
    {
        "BASE_FORMULA_NAME": "XX_RATE_PERIODIZATION",
        "FORMULA_TEXT": "Inputs are BEN_IV_CONVERT_FROM (text), BEN_IV_CONVERT_FROM_VAL (text)\nDEFAULT_DATA_VALUE FOR BEN_PEN_PL_NAME_TN is 'My-Default'\nDEFAULT_DATA_VALUE FOR BEN_PEN_ENRT_CVG_STRT_DT_DN is '1951/01/01 0:00:00'(date)\nDEFAULT_DATA_VALUE FOR BEN_PEN_ORGNL_ENRT_DT_DN is '1951/01/01 0:00:00'(date)\nDEFAULT FOR BEN_YRP_START_DATE is '1951/01/01 0:00:00'(date) DEFAULT_DATA_VALUE FOR BEN_PEN_OPT_NAME_TN is 'My-Default' DEFAULT_DATA_VALUE FOR BEN_PEN_BNFT_AMT_NN is 0\nl_eff_date='1951/01/01 0:00:00' (date)\nl_new_eff_date='1951/01/01 0:00:00' (date) l_enrt_cvg_strt_char='NA'\nl_enrt_cvg_strt_dt='1951/01/01 0:00:00' (date)\nl_ori_enrt_cvg_strt_dt='1951/01/01 0:00:00' (date)\nl_chk_date='1951/01/01 0:00:00' (date)\nl_yr_perd_st_date='1951/01/01 0:00:00' (date)\nl_prev_bnft_amt_chr='N'\nl_bnft_amt=0\nl_prev_bnft_amt=0\nl_prev_cntbn=0\nDFND_VAL=0\nANN_VAL=0\nCMCD_VAL=0\ni=1\nj=1\nl_total_tp_in_cal_year=1\nl_pay_perd_totper_rem=99\nl_pay_perd=1\nl_pay_cur_perd=1\n/* input values */\nl_iv_period=BEN_IV_CONVERT_FROM\nl_iv_val=to_number(BEN_IV_CONVERT_FROM_VAL)\n/* Main () */\nj=1\n/* change contexts for accommodating waiting periods or future rate, coverage start dates */ l_eff_date=GET_CONTEXT(EFFECTIVE_DATE, to_date('1951/01/01 0:00:00'))\nl_new_eff_date=add_days(l_eff_date,15)\nCHANGE_CONTEXTS(EFFECTIVE_DATE=l_new_eff_date)\n(/* get the benefit amount and the enrollment coverage start date within this block. Replace plan and option names below */\nwhile (BEN_PEN_PL_NAME_TN.exists(j)) loop (\nif ((BEN_PEN_PL_NAME_TN[j]='ABC_PT1_PLAN1') and\n(BEN_PEN_OPT_NAME_TN[j]='ABC_PT1_PLAN1_OPT1')) then\n(\nl_bnft_amt=BEN_PEN_BNFT_AMT_NN[j]\nl_enrt_cvg_strt_dt=BEN_PEN_ENRT_CVG_STRT_DT_DN[j] l_ori_enrt_cvg_strt_dt=BEN_PEN_ORGNL_ENRT_DT_DN[j] )\nj=j+1\n) /*end loop plan option */\n) /*end change contexts */\nj=1\nl_new_eff_date=add_days(l_eff_date,-1)\nCHANGE_CONTEXTS(EFFECTIVE_DATE=l_new_eff_date)\n(/* get the previous benefit amount within this block. Replace plan and option names below. */ l_prev_bnft_amt_chr=BEN_FN_GET_CHAR_VALUE( 'BEN_PRTT_ENRT_RSLT'\n,'BNFT_AMT'\n,'ABC_PT1_PLAN1'\n,'ABC_PT1_PLAN1_OPT1'\n)\nif ( l_prev_bnft_amt_chr <> ' ' and l_prev_bnft_amt_chr <> 'NO_DATA_FOUND' and\nl_prev_bnft_amt_chr <> 'N' ) then\n(l_prev_bnft_amt=to_number(l_prev_bnft_amt_chr))\n) /*end change contexts */\nIF (l_bnft_amt = 0 and l_iv_period = 'ANNUAL' ) THEN\n(\nl_bnft_amt = l_iv_val\n)\n/* check if enrolled earlier in same year */\nIF (l_ori_enrt_cvg_strt_dt <= l_enrt_cvg_strt_dt) THEN\n(\nl_chk_date = l_ori_enrt_cvg_strt_dt\n)\nELSE\n(\nl_chk_date = l_enrt_cvg_strt_dt\n)\n/* substitute the program id in below clause to pick year period start date */\nCHANGE_CONTEXTS(PGM_ID = 300100083634356,EFFECTIVE_DATE=l_new_eff_date)\n(\nl_yr_perd_st_date = BEN_YRP_START_DATE\n)\n/* If enrolled in prior year, use this year period start date */ IF ( l_chk_date < l_yr_perd_st_date ) THEN (\nl_chk_date = l_yr_perd_st_date\n)\nl_pay_perd= to_number(BEN_FN_GET_CHAR_VALUE( 'PAY_TIME_PERIODS'\n,'PERIOD_NUM'\n,' '\n,' '\n,'START_DATE'\n,to_char(l_chk_date)\n))\n/* Get the current running pay periods by passing the effective date */\nl_pay_cur_perd= to_number(BEN_FN_GET_CHAR_VALUE( 'PAY_TIME_PERIODS'\n,'PERIOD_NUM'\n,' '\n,' '\n,'START_DATE'\n,to_char(l_new_eff_date)\n))\nl_total_tp_in_cal_year = to_number(BEN_FN_GET_CHAR_VALUE( 'PAY_TIME_PERIODS'\n,'TOTAL_TP_IN_CALENDAR_YEAR'\n,' '\n,' '\n,'START_DATE'\n,to_char(l_chk_date)\n))\nl_pay_perd_totper_rem =l_total_tp_in_cal_year - l_pay_cur_perd +1\nIF (l_prev_bnft_amt <> 0 ) THEN\n(\nl_prev_cntbn = (l_prev_bnft_amt/(l_total_tp_in_cal_year-l_pay_perd+1))*(l_pay_cur_perd - l_pay_perd )\n)\nELSE\n(\nl_prev_cntbn = 0\n)\nCMCD_VAL = (l_bnft_amt - l_prev_cntbn )/l_pay_perd_totper_rem DFND_VAL = (CMCD_VAL * l_pay_perd_totper_rem)/12 ANN_VAL = l_bnft_amt\nRETURN DFND_VAL,ANN_VAL,CMCD_VAL",
        "LEGISLATIVE_DATA_GROUP": "XX",
        "Description": "This formula calculates the payroll deduction amount for a benefit based on enrollment timing and pay periods.\n\nIt retrieves the benefit amount and the enrollment start date based on the employee's selected plan and option.\nIf no benefit amount exists and the conversion period is annual, it assigns the provided value.\nIt determines whether the enrollment is from a previous year and adjusts accordingly.\nThe number of remaining pay periods in the year is calculated to distribute deductions evenly.\nFinally, it computes monthly deductions, annual benefit value, and current payroll deduction amount.",
        "FORMULA_TYPE_NAME": "Rate Periodization"
    }
]